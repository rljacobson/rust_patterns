<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Information Hiding, Encapsulation, and Shared Implementation"><title>rust_patterns::shared_implementation - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-e56847b5.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="rust_patterns" data-themes="" data-resource-suffix="" data-rustdoc-version="1.91.1 (ed61e7d7e 2025-11-07)" data-channel="1.91.1" data-search-js="search-e256b49e.js" data-stringdex-js="stringdex-c3e638e9.js" data-settings-js="settings-c38705f0.js" ><script src="../../static.files/storage-e2aeef58.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-6dc2a7f3.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Module shared_implementation</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../rust_patterns/index.html">rust_<wbr>patterns</a><span class="version">0.1.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module shared_<wbr>implementation</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#information-hiding-encapsulation-and-shared-implementation" title="Information Hiding, Encapsulation, and Shared Implementation">Information Hiding, Encapsulation, and Shared Implementation</a><ul><li><a href="#software-engineering-101" title="Software Engineering 101.">Software Engineering 101.</a></li><li><a href="#notes" title="Notes">Notes</a></li></ul></li></ul><h3><a href="#modules">Module Items</a></h3><ul class="block"><li><a href="#modules" title="Modules">Modules</a></li></ul></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="../index.html">In crate rust_<wbr>patterns</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">rust_patterns</a></div><h1>Module <span>shared_<wbr>implementation</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/rust_patterns/shared_implementation/mod.rs.html#1-52">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="information-hiding-encapsulation-and-shared-implementation"><a class="doc-anchor" href="#information-hiding-encapsulation-and-shared-implementation">§</a>Information Hiding, Encapsulation, and Shared Implementation</h2>
<p>Rust supports shared interfaces via traits. However, Rust’s support for
shared <em>implementation</em> is very limited.</p>
<p>A trait can have a default implementation for a method, but this support for shared
implementation is hamstrung by the fact that traits cannot have data members of any
visibility. Thus, any default implementation can only assume about <code>self</code> what the trait
itself asserts and cannot access any data directly. What’s more, because they are intended
as a mechanism for defining public interfaces, trait methods are necessarily public.</p>
<p>Generics have similar limitations: they can assume very little about the type parameters,
and they cannot access data members of any visibility. Their advantage is that they are
monomorphized at compile time and thus don’t incur the cost of runtime dynamic dispatch.</p>
<p>For someone coming from OOP languages like C++, Rust’s lack of language-level
support for <em>shared implementation</em> (not just shared interfaces) can be a pain
point. This module demonstrates patterns for dealing with these limitations:</p>
<ul>
<li>The sealed trait concept is an umbrella for a set of techniques for achieving fine-grained access and
overridability control of trait methods while also maintaining a level of encapsulation.</li>
<li><code>impl</code>-side trait constraints and blanket trait implementations are patterns
for dealing with Rust’s ophan/coherence rules and that can result in cleaner library interfaces.</li>
</ul>
<h3 id="software-engineering-101"><a class="doc-anchor" href="#software-engineering-101">§</a>Software Engineering 101.</h3>
<p><em>Information hiding</em> means concealing the internal details (design decisions,
data representations, or algorithms) of a software component so that other parts of the system
depend only on its public interface, not on its inner workings.<a href="#info_hiding">¹</a></p>
<div><table><thead><tr><th>Term</th><th>Definition</th><th>Relationship to Information Hiding</th></tr></thead><tbody>
<tr><td><strong>Encapsulation</strong></td><td>The mechanism enforcing information hiding at the language level.</td><td>The implementation of information hiding in the source code.</td></tr>
<tr><td><strong>Abstraction</strong></td><td>The cognitive process of determining the essential characteristics of a thing without respect to its implementation.</td><td>The intellectual outcome of information hiding.</td></tr>
<tr><td><strong>Modularity</strong></td><td>Having components (“modules”) that are self-contained, have well-defined responsibilities and interfaces, and can be developed, tested, and maintained independently.</td><td>The system-level outcome of information hiding.</td></tr>
</tbody></table>
</div>
<p>One can (and <em>should</em>) quibble with these definitions, but they are good enough for our purpose.</p>
<h3 id="notes"><a class="doc-anchor" href="#notes">§</a>Notes</h3>
<p><a name="note1">1.</a> The term <em>information hiding</em> was introduced by David
Parnas in his 1972 paper, <em><a href="https://dl.acm.org/doi/pdf/10.1145/361598.361623">“On the Criteria To Be Used in Decomposing Systems
into Modules.”</a></em> In this
context, the word <em>module</em> is synonymous with <em>software component</em> and need
not correspond directly to the Rust language feature of the same name.</p>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><dl class="item-table"><dt><a class="mod" href="impl_side_constraints/index.html" title="mod rust_patterns::shared_implementation::impl_side_constraints">impl_<wbr>side_<wbr>constraints</a></dt><dt><a class="mod" href="sealed_traits/index.html" title="mod rust_patterns::shared_implementation::sealed_traits">sealed_<wbr>traits</a></dt><dd>Fine-grained Encapsulation and Information Hiding with Traits</dd></dl></section></div></main></body></html>